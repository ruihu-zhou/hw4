#数字图像处理第四次作业
1. 姓名：周瑞虎
2. 班级：自动化61
3. 学号：2160504027
4. 提交日期：2019/3/17
***
###       摘要：高斯滤波是一种线性平滑滤波，适用于消除高斯噪声，广泛应用于图像处理的减噪过程。简单说来，高斯滤波就是对一个像素点周围领域内的像素点的像素值进行加权求和的过程，具体操作则是使用高斯模板去逐像素运算，得到结果即可。边缘检测是图像处理的一个基本问题，要想实现机器人寻找物体，测量，抓取，都离不开边缘检测，边缘检测的方法也很多，而在这之前有必要的话需要对边缘进行增强，这就涉及到非锐化掩蔽和高提升滤波，以增强图像边缘信息，使得边缘检测更加准确。
***

###1.空域低通滤波器：分别用高斯滤波器和中值滤波器去平滑测试图像test1和2，模板大小分别是3x3 ， 5x5 ，7x7； 利用固定方差 sigma=1.5产生高斯滤波器. 附件有产生高斯滤波器的方法； 分析各自优缺点；
2维高斯函数的一般形式是
$$
p(x_1,x_2)=\frac{1}{2\pi\sigma^2}exp(-\frac{x_1^2+x_2^2}{2\sigma^2})
$$
假设mask中心为$p(0,0)$,那么一个3*3大小的高斯滤波器：
$$
\frac{1}{2\pi\sigma^2}
\begin{vmatrix}
exp(-\frac{2}{2\sigma^2})&exp(-\frac{1}{2\sigma^2})&exp(-\frac{2}{2\sigma^2})\\
exp(-\frac{1}{2\sigma^2})&1&exp(-\frac{1}{2\sigma^2})\\
exp(-\frac{2}{2\sigma^2})&exp(-\frac{1}{2\sigma^2})&exp(-\frac{2}{2\sigma^2})\\
\end{vmatrix}
$$
其中$\sigma$大小需要根据需要包含模板内容和高斯滤波器的尺度来决定，当$\sigma$取0.85，高斯滤波器尺度为3*3时，大约包含了70%的内容。

   中值滤波是一种非线性数字滤波器技术，经常用于去除图像或者其它信号中的椒盐噪声和斑点噪声。在一个$f(x,y)$的邻域内，对该邻域内的像素点值大小排序，选择中间的作为中心$f(x,y)$的值，重复此过程。
![](https://i.imgur.com/lFsrA1w.png)
![](https://i.imgur.com/LnWcKlg.png)
高斯滤波器在平滑的同时，图片也变得模糊起来，尤其是随着高斯滤波器的尺度变大，中值滤波器的模糊效果更加明显，随着尺度增大，甚至一些地方出现了马赛克，可见，高斯和中值滤波都不适合很大模板尺度的滤波。中值滤波器在高维数的模板下，噪点消失优于高斯滤波器，但是在保持源图像方面，高斯滤波器优于中值滤波器。

***
###2.利用高通滤波器滤波测试图像test3,4：包括unsharp masking, Sobel edge detector, and Laplace edge detection；Canny algorithm.分析各自优缺点；

#####unsharp masking
非锐化掩蔽的一般步骤是
1.模糊原图像得到$\quad\quad\overline{f(x,y)}$是模糊化以后的图像
2.从原图像中减去模糊图像（产生的插值称为模板)$\quad\quad g_{mask}(x,y)=f(x,y)-\overline{f(x,y)}$
3.将模板加到源图像上$\quad\quad g_{mask}(x,y)=f(x,y)+k*g_{mask}(x,y)$
#####Sobel edge detector
sobel边缘检测是使用了两个算子分别求两个方向上的倒数
$$
G_x = 
\begin{vmatrix}
1&2&1\\
0&0&0\\
-1&-2&-1\\
\end{vmatrix}
$$
$$
G_y = 
\begin{vmatrix}
-1&0&1\\
-2&0&2\\
-1&0&1\\
\end{vmatrix}
$$
$$
G = \sqrt{x^2+y^2}\quad\quad \theta=\arctan\frac{G_y}{G_x}
$$
分别使用两个算子去计算，然后计算梯度G，当梯度G大于某一阈值（本次实验选择0.2），就认为该点是一个边缘。
#####Laplace edge detection
$$
mask =
\begin{vmatrix}
0&1&0\\
1&-4&1\\
0&1&0\\
\end{vmatrix}
$$
同样的思想，当梯度大于某一阈值的时候（本次实验选择0.1），认为该点是一个边缘。

#####Canny algorithm
1.图像降噪 
噪声是灰度变化很大的地方，容易被识别为伪边缘，因而容易被识别为伪边缘，而且一般选用大小大于6$\sigma$的奇数模板，本次实验选用的是$\sigma=4$,25*25大小的高斯模板。
2.计算图像梯度 
这一步和sobel检测基本无区别，得到了可能是边缘的全体集合。
3.非极大值抑制 
灰度变化的地方一般比较集中，对每一个像素点的导数值和其方向上的两个梯度比较，如果中心像素点的值不是最大的，那么该点就不再认为是边缘点。这样可以将有多个像素宽的边缘变成一个单像素宽的边缘，即把边缘变瘦。
4.阈值筛选
设置一个双阈值，即低阈值（low）（本次实验选择0.04），高阈值（high）（本次实验选择0.10）。灰度变化大于high的，设置为强边缘像素，低于low的，剔除。在low和high之间的设置为弱边缘。进一步判断，如果其领域内（8邻域）有强边缘像素，保留，如果没有，剔除。

![](https://i.imgur.com/G7WsDUX.jpg)  

![](https://i.imgur.com/LB7p0VF.jpg) 

![](https://i.imgur.com/cYXyzgN.jpg) 

这两幅图中上面一行的结果是使用了Matlab函数得出的结果，下面是我自己写的函数，可以看出，sobel和laplace检测基本无问题，canny检测对于房屋检测效果还是不错，但是使用上述参数对test3图效果不是很好，重新调整了参数以后（第四步阈值为高阈值0.4，低阈值0.2）和高斯滤波器模板大小，改为(5*5，$\sigma$ = 0.8)获得的结果好了很多。第三幅图显示的是更改了更小的高斯模板(5*5，$\sigma$ = 0.8)之后房屋的效果，可以看出，图片噪声增加。因而，在使用这些边缘检测方法的时候，如何确定参数和高斯模板大小是一个很重要的问题，在今后的学习过程中要思考这一问题。

***

参考文献：

- 数字图像处理（第三版）冈萨雷斯